$(function(){
  var input = kechak.input = {};
  input.updated    = false;
  input.textarea   = $('#input-text textarea');
  input.autoUpdate = setInterval(function(){
    if (false == input.updated) return;
    kechak.completion.update(input.textarea.val());
    input.updated = false;
  }, 3000);
  input.textarea.bind('textchange', function(e, text){
    input.updated = true;
  });
  input.append = function(text){
    input.textarea.val(input.textarea.val() + text);
  };
  $('#input-button').click(function(e){
    kechak.socket.emit('message/broadcast', input.textarea.val());
    input.textarea.val('');
  });
});
